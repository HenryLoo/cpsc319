{% extends "students/base_student.html" %}

{% block current_tab %}
	"View"
{% endblock %}


{% block student_content %}
{% if user_role == 'TEACHER'%}
<ul class="nav nav-tabs nav-justified">
    <li role="presentation" class="active"><a href="{% url 'school:studentlist' %}">View Students</a></li>
</ul>
{%else%}
<ul class="nav nav-tabs nav-justified">
    <li role="presentation" class="active"><a href="{% url 'school:studentlist' %}">View Students</a></li>
    <li role="presentation"><a href="{% url 'school:studentcreate' %}">Add Student</a></li>
    <li role="presentation"><a href="{% url 'school:studentupload' %}">Upload CSV</a></li>
</ul>

<!-- Page Heading -->
<div class="row">

    <div class="col-lg-12">
        <h1 class="page-header">
            Students <small>List</small>
        </h1>
        <ol class="breadcrumb">
            <li class="active">
                <i class="fa fa-sitemap"></i> <a> Students > Students List</a>
            </li>
        </ol>
    </div>


<div class="col-md-3 student-list">
	<form id='student-view-input' class='form-inline' action="" method="get">
			{% if user_role != 'TEACHER'%}
	    		<span>View Students:</span>
	    		<div class="form-group">
	    		{% for radio in view_form.view %}
				    {{ radio }}
				{% endfor %}
				</div>
				{% endif %}
		<div class="filters-holder">
			<a class="btn btn-primary btn-sm" data-toggle="collapse" href="#filters" aria-expanded="false">
			Filters
			</a>
			<div class="collapse" id="filters">
	        	{{ student_filter.as_p }}
	        	<button class="btn btn-xs btn-default" type="submit" value="submit">Submit</button>
	    	</form>
	    	</div>    
		</div>
<br><br>

	{% if student_list %}
	<ul class="list-unstyled student-list">
		{% for student in student_list %}
	  		<li>
	  		<a href="{% url 'school:studentlist' student.id %}?{{request.GET.urlencode}}">
	  			 {{ student.first_name }} {{ student.last_name }}
	  		</a>
	  		</li>
	  	{% endfor %}
	</ul>

	{% else %}
		<div class="alert alert-info" role="alert">No students are registered in this period.</div>
	{% endif %}

</div>

<div class="col-md-9 student-info">

	{% if error %}
		<div class="panel panel-danger">
			{{ error }}
		</div>
	{% else %}
	{% if succ %} <div class="alert alert-info" role="alert">Student was edited successfully!</div> {%endif%}
	<form role="form" action="{%url 'school:studentedit' student_id%}?{{request.GET.urlencode}}" method="post">
		{% csrf_token %}
		<table class="table table-hover student-form">
	    	{{ student_form.as_table }}
	    </table>
	    <input type="submit" class="btn btn-primary center-block" value="Submit" />
	</form> 

	{% endif %}
</div>
{%endif%}

{% endblock student_content %}