{% extends "admins/base_admin.html" %}

{% block current_tab %}
	"View"
{% endblock %}

<!--{% block hacky_script %}
$('#edit-admin-btn').click(function() {
	var fields = $('td:nth-child(2)')
	$.each(fields, function(i,elm) { 
		$(elm).html("<input value=\"" + $(elm).text().trim() + "\"></input>") 
	})
});
{% endblock hacky_script %}-->

{% block admin_content %}
<ul class="nav nav-tabs nav-justified">
    <li role="presentation" class="active"><a href="{% url 'account:view_admins' %}">View Admins</a></li>
    <li role="presentation"><a href="{% url 'account:create_admin' %}">Add Admin</a></li>
</ul>

 <!-- Page Heading -->
                <div class="row">

                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Admins <small>List</small>
                        </h1>
                        <ol class="breadcrumb">
                            <li class="active">
                                <i class="fa fa-sitemap"></i> <a> Admins > List</a>
                            </li>
                        </ol>

                    </div>

<div class="col-md-3 admin-list">
	<form class='form-inline' action="" method="get">
	<div class="filters-holder">
		<a class="btn btn-primary btn-sm" data-toggle="collapse" href="#filters" aria-expanded="false">
		Filters
		</a>
		<div class="collapse" id="filters">
        	{{ admin_filter.as_p }}
        	<button class="btn btn-xs btn-default" type="submit" value="submit">Submit</button>
    	</form>
    	</div>    
	</div>
<br><br>
<h4> System Admins </h4> 
	{% if system_admin_list %}
	<ul class="list-unstyled admin-list">
		{% for admin in system_admin_list %}
	  		<li>
	  		<a href="{% url 'account:view_admins' admin.id %}?{{request.GET.urlencode}}">
	  			 {{ admin.user.first_name }} {{ admin.user.last_name }}
	  		</a>
	  		</li>
	  	{% endfor %}
	</ul>

	{% else %}
		<div class="alert alert-info" role="alert">No System Admins have been added.</div>
	{% endif %}
	<br>
<h4> School Admins </h4> 
	{% if school_admin_list %}
	<ul class="list-unstyled admin-list">
		{% for admin in school_admin_list %}
	  		<li>
	  		<a href="{% url 'account:view_admins' admin.id %}?{{request.GET.urlencode}}">
	  			 {{ admin.user.first_name }} {{ admin.user.last_name }}
	  		</a>
	  		</li>
	  	{% endfor %}
	</ul>

	{% else %}
		<div class="alert alert-info" role="alert">No School Admins have been added.</div>
	{% endif %}

</div>

<div class="col-md-9 admin-info">
	
	{% if admin %}
	
	{% if edit_success %}
		<div class="alert alert-info" role="alert">
			Admin edited successfully.
		</div>
	{% endif %}
	
	<form role="form" action="{%url 'account:edit_admin' admin.id%}" method="post">
		{% csrf_token %}
		{% if error %} {{error}} {%endif%}
		<table class="table table-hover admin-form">
	    	{{ user_form.as_table }}
			{{ admin_form.as_table }}
		</table>

	    <input type="submit" class="btn btn-primary center-block" value="Save" />
	</form> 

	{% else %}
		<div class="alert alert-info" role="alert">
			{{ error }}
		</div>
	{% endif %}
</div>

{% endblock admin_content %}