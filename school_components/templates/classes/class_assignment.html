{% extends "classes/base_class.html" %}

{% block class_content %}

{% if user_role == 'TEACHER' %}
<ul class="nav nav-tabs nav-justified">
    <li role="presentation"><a href="{%url 'school:classlist' %}">View Classes</a></li>
    <li role="presentation" class="active"><a href="{%url 'school:classassignment' %}">Assignments</a></li>
    <li role="presentation"><a href="{%url 'school:classattendance' %}">Attendance</a></li>
    <li role="presentation"><a href="{%url 'school:classperformance' %}">Grading</a></li>
    <li role="presentation"><a href="{%url 'school:classreportcard' %}">Report Card</a></li>
</ul>
{%else%}
<ul class="nav nav-tabs nav-justified">
    <li role="presentation"><a href="{%url 'school:classlist' %}">View Classes</a></li>
    <li role="presentation"><a href="{%url 'school:classcreate' %}">Add Class</a></li>
    <li role="presentation"><a href="{%url 'school:classregistration' %}">Class Registration</a></li>
    <li role="presentation" class="active"><a href="{%url 'school:classassignment' %}">Assignments</a></li>
    <li role="presentation"><a href="{%url 'school:classattendance' %}">Attendance</a></li>
    <li role="presentation"><a href="{%url 'school:classperformance' %}">Grading</a></li>
    <li role="presentation"><a href="{%url 'school:classreportcard' %}">Report Card</a></li>
</ul>
{%endif%}
<div class="row">  
    <div class="col-lg-12">
    <h1 class="page-header">
        Classes<small> Assignments</small>
    </h1>
    <ol class="breadcrumb">
        <li class="active">
            <i class="fa fa-sitemap"></i> <a> Classes > Assignments</a>
        </li>
    </ol>
    </div>
</div>


<div class="col-md-3">
{% if class_list %}
<div class="list-group">
    {% for class_ in class_list %}
        {% if class_ = class %}
        <a href="{% url 'school:classassignment' class_.id %}" class="list-group-item active">
           {{ class_.course }} {{ class_.section }}
        </a>
        {% else %}
        <a href="{% url 'school:classassignment' class_.id %}" class="list-group-item">
           {{ class_.course }} {{ class_.section }}
        </a>
        {% endif %}
    {% endfor %}
</div>
{% else %}
    <div class="alert alert-info" role="alert">No classes have been added.</div>
{% endif %}
</div>

<div class="col-md-8">
    {% if class %}
        <h4>Add Assignment</h4>
        <br><br>   

        <form role="form" action="{%url 'school:classassignment' class.id%}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
                <table class="table table-hover school-form">
                {{ form.as_table }}
                 </table>


                <input type="submit" class="btn btn-primary pull-right" value="Upload" />
        </form> 

            <!-- <input type="submit" class="btn btn-default" value="Submit" /> -->

        <br><br><br>
        <h4>Class Assignments</h4>

        <div class="table-responsive">
            <table id="mytable" class="table table-bordred table-striped">
                <thead>
                  <tr>
                    <th>Assignment</th>
                    <th>Date</th>
                    <th>Weight</th>
                    <th>Total</th>
                    <th>Comments</th>
                    <th>Delete</th>
                    <th>Edit</th>
                    <th>Open</th>
                  </tr>
                </thead>
                <tbody>
                    {% for assignment in assignments %}
                        <tr>
                        <td>{{assignment.title}}</td>
                        <td>{{assignment.date}}</td>
                        <td>{{assignment.grade_weight}}</td>
                        <td>{{assignment.total_weight}}</td>
                        <td>{{assignment.comments}}</td>
                        <td>
                            <p data-placement="top" data-toggle="tooltip" title="Delete">
                                <a href="" target-url="{% url 'school:classassignmentdelete' class.id assignment.id %}" id="btn-delete"
                                class="btn btn-danger btn-xs delete-link" data-toggle="modal" data-target="#delete-modal">
                                <span class="glyphicon glyphicon-trash"></span>
                            </a>
                        </p>
                        </td>
                        <td><a href="{%url 'school:assignmentedit' class.id assignment.id%}" id="edit-course-btn" class="pull-right">Edit</a></td>
                        <td>
                        {% if assignment.content %}
                        <a target="_blank" href="{{assignment.content.url}}"><i class="fa fa-file-pdf-o"></i></a>
                        {%endif%}
                        </td>
                    </tr>
                  {% endfor %}

                </tbody>
            </table>             
        </div>
            
    {% else %}
    {% if class_list %}
        <div class="alert alert-info" role="alert">
            Select a class to view assignments.
        </div>
    {% endif %}
{% endif %}
</div>

{% endblock class_content %}


