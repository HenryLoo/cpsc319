{% extends "courses/base_course.html" %}

{% block course_content %}
<ul class="nav nav-tabs nav-justified">
    <li role="presentation" class="active">
        <a href="{% url 'school:courselist' %}">View Courses</a>
    </li>
	<li role="presentation">
        <a href="{% url 'school:deptlist' %}">View Departments</a>
    </li>
    <li role="presentation">
        <a href="{% url 'school:coursecreate' %}">Add Course</a>
    </li>
    <li role="presentation">
        <a href="{% url 'school:deptcreate' %}">Add Department</a>
    </li>
    <li role="presentation">
        <a href="{% url 'school:courseassignment' %}">Assignments</a>
    </li>
</ul>

<div class="row">   
	<div class="col-lg-12">
	    <h1 class="page-header">
	        Courses<small> List</small>
	    </h1>
	    <ol class="breadcrumb">
	        <li class="active">
	            <i class="fa fa-sitemap"></i> <a>Courses > List</a>
	        </li>
	    </ol>
	</div>

<div class="col-md-3 school-list">

	<div class="filters-holder">
		<a class="btn btn-primary btn-sm" data-toggle="collapse" href="#filters" 
		aria-expanded="false">
	  	Filters
		</a>
		<div class="collapse" id="filters">
			<form action="{%url 'school:courselist' %}" method="get">
		  		{{ course_filter.as_p }}
		  		<button class="btn btn-xs btn-default" type="submit" value="submit">
		  		Submit </button>
		  	</form>
		</div>
	</div>
<br><br>

	{% if course_list %}
	<ul class="list-unstyled school-list">
		{% for course in course_list %}
	  		<li>
	  		<a href="{% url 'school:courselist' course.id %}?{{request.GET.urlencode}}">
	  			 {{ course.name }} 
	  		</a>
	  		</li>
	  	{% endfor %}
	</ul>

	{% else %}
		<div class="alert alert-info" role="alert">No courses have been added.</div>
	{% endif %}

</div>

	
	
<div class="col-md-9 school-info">
	{% if messages %}
        {% for message in messages %}
            <div class="alert alert-danger alert-dismissible fade in" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

	{% if course %}
	<span>
		<h3> Course Info </h3>
        <a href="" target-url="{% url 'school:coursedelete' course.id %}" id="btn-delete" class="pull-right text-danger delete-link" data-toggle="modal" data-target="#delete-modal"> Delete </a>
		<a href="{%url 'school:courseedit' course.id %}?{{request.GET.urlencode}}" id="edit-course-btn" class="pull-right"> Edit </a>
	</span>
	<table class="table table-hover">
		<tr> 
			<td> Name: </td>
			<td> 
				{{ course.name }}
			</td>
		</tr>
		<tr> 
			<td> Department: </td>
			<td> 
				{{ course.department }} 
			</td>
		</tr>
		{% if course.age_requirement != 0 %}
		<tr> 
			<td> Age Requirement: </td>
			<td> {{ course.age_requirement }} </td>
		</tr>
		{% endif %}
		<tr>
			<td> Prerequisite: </td>
			<td> 
				{% if prereq %} 
					<a href="{% url 'school:courselist' prereq.id %}"> 
					{{ prereq.name }} 
					</a>
				{% else %}
					None
				{% endif %}
			</td>
		</tr>
		<tr> 
			<td> Description: </td>
			{% if course.description %}
			<td> {{ course.description }} </td>
			{% else %}
			<td> None </td>
			{% endif %}
		</tr>
	</table>

	{% elif error %}
		<div class="panel panel-danger">
			{{ error }}
		</div>
	{% else %}
		<div class="content alert alert-info" role="alert">
			Select a course to view details.
		</div>
	{% endif %}
</div>
{% endblock course_content %}