{% extends "admins/base_admin.html" %}

{% block current_tab %}
	"View"
{% endblock %}

{% block hacky_script %}
$('#edit-admin-btn').click(function() {
	var fields = $('td:nth-child(2)')
	$.each(fields, function(i,elm) { 
		$(elm).html("<input value=\"" + $(elm).text().trim() + "\"></input>") 
	})
});
{% endblock hacky_script %}

{% block admin_content %}
<ul class="nav nav-tabs nav-justified">
    <li role="presentation" class="active"><a href="{% url 'account:view_admins' %}">View Admins</a></li>
    <li role="presentation"><a href="{% url 'account:create_admin' %}">Add Admin</a></li>
</ul>

 <!-- Page Heading -->
                <div class="row">

                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Admins <small>List</small>
                        </h1>
                        <ol class="breadcrumb">
                            <li class="active">
                                <i class="fa fa-sitemap"></i> <a> Admins > List</a>
                            </li>
                        </ol>

                    </div>

<div class="col-md-3 admin-list">
	<form class='form-inline' action="" method="get">
	<div class="filters-holder">
		<a class="btn btn-primary btn-sm" data-toggle="collapse" href="#filters" aria-expanded="false">
		Filters
		</a>
		<div class="collapse" id="filters">
        	{{ admin_filter.as_p }}
        	<button class="btn btn-xs btn-default" type="submit" value="submit">Submit</button>
    	</form>
    	</div>    
	</div>
<br><br>

<h4> System Admins </h4> 
	{% if system_admin_list %}
	<ul class="list-unstyled admin-list">
		{% for admin in system_admin_list %}

	  		<li>
	  		<a href="{% url 'account:view_admins' admin.id %}?{{request.GET.urlencode}}">
	  			 {{ admin.user.first_name }} {{ admin.user.last_name }}
	  		</a>
	  		</li>
	  	{% endfor %}
	</ul>

	{% else %}
		<div class="alert alert-info" role="alert">No System Admins have been added.</div>
	{% endif %}
	<br>
<h4> School Admins </h4> 
	{% if school_admin_list %}
	<ul class="list-unstyled admin-list">
		{% for admin in school_admin_list %}
	  		<li>
	  		<a href="{% url 'account:view_admins' admin.id %}?{{request.GET.urlencode}}">
	  			 {{ admin.user.first_name }} {{ admin.user.last_name }}
	  		</a>
	  		</li>
	  	{% endfor %}
	</ul>

	{% else %}
		<div class="alert alert-info" role="alert">No School Admins have been added.</div>
	{% endif %}

</div>

<div class="col-md-9 admin-info">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-danger alert-dismissible fade in" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
	{% if admin %}
	<span>
		<h3> Admin Info </h3>
		{% if admin.role == 'SYSTEM_ADMIN' and user_role == 'SCHOOL_ADMIN' %} 
		{%else%}
		<a href="" target-url="{% url 'account:delete_admin' admin.id %}" id="btn-delete" class="pull-right text-danger delete-link" data-toggle="modal" data-target="#delete-modal"> Delete </a>
		<a href="{% url 'account:edit_admin' admin.id %}?{{request.GET.urlencode}}" id="edit-admin-btn" class="pull-right"> Edit </a>
		{%endif%}
	</span>
	<table class="table table-hover">
		<tr> 
			<td> User ID: </td>
			<td> {{ admin.user.id }} </td>
		</tr>
		<tr> 

			<td> First Name: </td>
			<td> 
				{{ admin.user.first_name}} 
			</td>
		</tr>
		<tr> 
			<td> Last Name: </td>
			<td> 
				{{ admin.user.last_name}} 
			</td>
		</tr>

		<tr> 
			<td> Phone number: </td>
			<td> {{ admin.phone }} </td>
		</tr>
		<!--{% if admin.role != "SYSTEM_ADMIN" %}
		<tr> 
			<td> School branch: </td>
			<td> {{ admin.school.title }} </td>
		</tr>
		{% endif %}-->

	</table>

	{% else %}
		{%if not_valid_id%} 
		<div class="alert alert-info" role="alert">
			There is no admin in this school with that id.
		</div>
		{%else%}
		<div class="alert alert-info" role="alert">
			Select an admin to view details.
		</div>
		{%endif%}
	{% endif %}
</div>

{% endblock admin_content %}